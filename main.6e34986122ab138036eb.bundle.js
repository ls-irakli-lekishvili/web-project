(()=>{"use strict";var e,t={125:(e,t,s)=>{var i=s(260),a=s.n(i);const r={addCollider(e,t){return this.scene.physics.add.collider(this,e,t,null,this),this},bodyPositionDiff:0,prevRay:null,prevHasHit:!1,rayCast(e,t,s,i=0,a=40){if(this.bodyPositionDiff+=e.x-e.prev.x,Math.abs(this.bodyPositionDiff)<=i&&null!==this.prevRay)return{ray:this.prevRay,hasHit:this.prevHasHit};const{x:r,y:h,width:n,halfHeight:o}=e,l=new Phaser.Geom.Line;let c=!1;s?(l.x1=r+n,l.y1=h+o,l.x2=l.x1+a,l.y2=l.y1+a):(l.x1=r,l.y1=h+o,l.x2=l.x1-a,l.y2=l.y1+a);const d=null==t?void 0:t.getTilesWithinShape(l);return d&&d.length&&(c=this.prevHasHit=d.some((e=>~e.index))),this.bodyPositionDiff=0,this.prevRay=l,{ray:l,hasHit:c}}};class h extends a().Physics.Arcade.Sprite{constructor(e,t,s,i,a){super(e,t,s,i),this.effectName=i,this.impactPositionY=a,e.add.existing(this),e.physics.add.existing(this),this.on("animationcomplete",(e=>{e.key===this.effectName&&this.destroy()}),this)}preUpdate(e,t){super.preUpdate(e,t),this.placeEffect()}placeEffect(){if(!this.target||!this.body)return;const e=this.target.getCenter();this.body.reset(e.x,this.impactPositionY)}playOn(e){this.target=e,this.play(this.effectName,!0),this.placeEffect()}}const n=h;class o extends a().Physics.Arcade.Sprite{constructor(e,t,s,i){super(e,t,s,i),this.speed=300,this.maximumDistance=400,this.traveledDistance=0,this.damage=10,e.add.existing(this),e.physics.add.existing(this),this.body.setSize(this.width-13,this.height-20),this.effectManager=new class{constructor(e){this.scene=e}playEffectOn(e,t,s){new n(this.scene,0,0,e,s).playOn(t)}}(e)}preUpdate(e,t){super.preUpdate(e,t),this.traveledDistance>=this.maximumDistance&&(this.setActive(!1),this.setVisible(!1),this.traveledDistance=0,this.body.reset(0,0)),this.traveledDistance+=this.body.deltaAbsX()}collidesWithTarget(e){this.activateProjectile(!1),this.traveledDistance=0;const t=this.y;this.body.reset(0,0),this.effectManager.playEffectOn("hit_effect",e,t)}fire(e,t){this.activateProjectile(!0),this.body.reset(e,t),this.setVelocityX(this.speed)}activateProjectile(e){this.setActive(e),this.setVisible(e)}}const l=o,c=()=>(new Date).getTime();class d extends a().Physics.Arcade.Group{constructor(e){super(e.physics.world,e),this.coolDownTime=500,this.createMultiple({frameQuantity:5,active:!1,visible:!1,key:"fireball",classType:l})}fireProjectile(e){const t=this.getFirstDead(!1);t&&(this.timeFromLastShoot&&this.timeFromLastShoot+this.coolDownTime>c()||(e.lastDirection===a().Physics.Arcade.FACING_RIGHT?(t.speed=Math.abs(t.speed),t.setFlipX(!1)):(t.speed=-Math.abs(t.speed),t.setFlipX(!0)),t.fire(e.x,e.y),this.timeFromLastShoot=c()))}}const p=d;class y extends a().Physics.Arcade.Sprite{constructor(e,t,s,i){super(e,t,s,"player"),this.gravity=500,this.speed=200,this.jumpSpeed=350,this.isTouching=!1,this.throwVelocity=250,this.health=100,this.lastDirection=a().Physics.Arcade.FACING_RIGHT,this.mainScene=e,e.add.existing(this),e.physics.add.existing(this),this.leftTopCorner=i.leftTopCorner,Object.assign(this,r),this.init(),this.initUpdate()}init(){var e;this.cursor=this.scene.input.keyboard.createCursorKeys(),this.setGravityY(this.gravity),this.setCollideWorldBounds(!0),this.body.setSize(20,36),this.hp=new class{constructor(e,t,s,i){this.bar=new(a().GameObjects.Graphics)(e),this.bar.setScrollFactor(0,0),this.x=t,this.y=s,this.health=i,this.size={width:100,height:15},e.add.existing(this.bar),this.pixelsPerHealth=this.size.width/this.health}draw(e,t){this.bar.clear();const{width:s,height:i}=this.size;this.bar.fillStyle(10158335),this.bar.fillRect(e,t,s+2,i+2),this.bar.fillStyle(16777215),this.bar.fillRect(e+2,t+2,s-2,i-2);const a=Math.floor(this.health*this.pixelsPerHealth);this.bar.fillStyle(this.health>40?65280:16711680),this.bar.fillRect(e+2,t+2,a-2,i-2)}updateHealth(e){this.health=e,this.draw(this.x,this.y)}}(this.scene,this.leftTopCorner.x,this.leftTopCorner.y,this.health),this.hp.draw(this.leftTopCorner.x+5,this.leftTopCorner.y+5),(e=this.anims).create({key:"idle",frames:e.generateFrameNumbers("player",{start:0,end:8}),frameRate:5}),e.create({key:"run",frames:e.generateFrameNumbers("player",{start:11,end:16}),frameRate:10}),e.create({key:"jump",frames:e.generateFrameNumbers("player",{start:17,end:23}),frameRate:5}),e.create({key:"attack_fireball",frames:e.generateFrameNumbers("player_attack",{start:0,end:6}),frameRate:14}),this.projectiles=new p(this.scene),this.scene.input.keyboard.on("keydown-SPACE",(()=>{this.play("attack_fireball",!0),this.projectiles.fireProjectile(this)}))}initUpdate(){this.scene.events.on(a().Scenes.Events.UPDATE,this.update,this)}update(){if(this.isTouching)return;const{left:e,right:t,up:s}=this.cursor,i=a().Input.Keyboard.JustDown(s);this.anims.isPlaying&&"throw"===this.anims.getFrameName()||(e.isDown?(this.setVelocityX(-this.speed),this.play("run",!0),this.setFlipX(!0),this.lastDirection=a().Physics.Arcade.FACING_LEFT):t.isDown?(this.setVelocityX(this.speed),this.play("run",!0),this.setFlipX(!1),this.lastDirection=a().Physics.Arcade.FACING_RIGHT):(this.setVelocityX(0),0===this.body.velocity.y&&this.play("idle",!0)),i&&this.body.onFloor()&&(this.setVelocityY(-this.jumpSpeed),this.play("jump",!0)),this.y>=720&&this.mainScene.scene.start("GameOverScene"))}takesDamage(e){this.health-=e.damage,this.health<=0?(this.hp.updateHealth(0),this.mainScene.scene.start("GameOverScene")):this.hp.updateHealth(this.health),this.throwPlayer()}throwPlayer(){this.body.touching.right?this.setVelocity(-this.throwVelocity,-this.throwVelocity):this.setVelocity(this.throwVelocity,-this.throwVelocity),this.isTouching=!0;const e=this.playDamageTween();this.scene.time.delayedCall(1e3,(()=>{this.isTouching=!1,e.stop(),this.clearTint()}))}playDamageTween(){return this.scene.tweens.add({targets:this,duration:100,repeat:-1,tint:16777215})}}const m=y;class f extends a().Physics.Arcade.Sprite{constructor(e,t,s,i){super(e,t,s,i),this.gravity=500,this.speed=100,this.facingRight=!0,this.timeFromLastTurn=0,this.damage=20,this.health=50,e.add.existing(this),e.physics.add.existing(this),Object.assign(this,r),this.init(),this.initUpdate()}init(){this.platformColliderLayer=null,this.rayGraphics=this.scene.add.graphics({lineStyle:{width:2,color:11141290}}),this.setGravityY(this.gravity),this.setCollideWorldBounds(!0),this.setImmovable(!0),this.setSize(20,45),this.setOffset(8,20),this.setVelocityX(this.speed)}initUpdate(){this.scene.events.on(a().Scenes.Events.UPDATE,this.update,this)}update(e,t){this.getBounds().bottom>600?this.destroy():this.patrol(e)}patrol(e){if(!this.body||!this.body.onFloor())return;const{ray:t,hasHit:s}=this.rayCast(this.body,this.platformColliderLayer,this.facingRight,2);!s&&this.timeFromLastTurn+100<e&&(this.facingRight=!this.facingRight,this.setFlipX(!this.flipX),this.setVelocityX(-this.body.velocity.x),this.timeFromLastTurn=e)}setColliderLayer(e){this.platformColliderLayer=e}takesHit(e){e.collidesWithTarget(this),this.health<=0&&(this.scene.events.off(a().Scenes.Events.UPDATE,this.update,this),this.setActive(!1),this.rayGraphics.clear(),this.deleteEnemy()),this.health-=e.damage}deleteEnemy(){this.setTint(16711680),this.setVelocity(0,-300),this.body.checkCollision.none=!0,this.setCollideWorldBounds(!1)}}const u=f,g={EnemyBird:class extends u{constructor(e,t,s){var i;super(e,t,s,"enemy_bird"),(i=this.anims).create({key:"bird-enemy-idle",frames:i.generateFrameNumbers("enemy_bird",{start:0,end:12}),frameRate:8}),i.create({key:"bird-enemy-hurt",frames:i.generateFrameNumbers("enemy_bird",{start:25,end:26}),frameRate:5})}update(e,t){super.update(e,t),this.active&&(this.anims.isPlaying&&"bird-enemy-hurt"===this.anims.getName()||this.play("bird-enemy-idle",!0))}takesHit(e){super.takesHit(e),this.play("bird-enemy-hurt",!0)}}};class b extends a().GameObjects.Group{constructor(e){super(e),Object.assign(this,r)}getTypes(){return g}}const v=b;class w extends Phaser.GameObjects.Text{constructor(e,t,s,i){super(e,t,s,i.toString(),{font:"16px Arial Black",color:"#fff"}),this.time=i,this.setOrigin(.5),e.add.existing(this),e.physics.add.existing(this),this.x=this.scene.cameras.main.width/2,this.y=100}updateTimer(){this.scene.time.addEvent({delay:1e3,callback:this.setTimer,callbackScope:this,loop:!0})}setTimer(){this.time?this.text=(--this.time).toString():this.scene.scene.start("GameOverScene")}}const x=w;class S extends a().Scene{constructor(e){super({key:"MainScene"}),this.config=e}create(){var e;this.cameras.main.setBackgroundColor("#000000"),new x(this,100,100,20).updateTimer(),(e=this.anims).create({key:"hit_effect",frames:e.generateFrameNumbers("hit_effect",{start:0,end:4}),frameRate:10});const t=this.createMap(),s=this.createLayers(t),i=this.getPlayerZones(s.playerZones),a=this.createPlayer(i.start),r=this.createEnemies(s.enemySpawns,s.collider);this.createLevelFinish(i.end,a),this.addPlayerCollider(a,{platform:s.collider}),this.addEnemiesCollider(r,{platform:s.collider,player:a}),this.initFollowerCamera(a)}createMap(){const e=this.make.tilemap({key:"map"});return e.addTilesetImage("main_lev_build_1","tiles_1"),e}createLayers(e){const t=e.getTileset("main_lev_build_1"),s=e.createLayer("platform_collider",t),i=e.createLayer("environment",t),a=e.createLayer("platforms",t),r=e.getObjectLayer("player_zones"),h=e.getObjectLayer("enemy_spawns");return s.setCollisionByExclusion([-1],!0),{platforms:a,environment:i,collider:s,playerZones:r,enemySpawns:h}}createPlayer(e){return new m(this,e.x,e.y,this.config)}createEnemies(e,t){var s;const i=new v(this),a=i.getTypes();return null===(s=e.objects)||void 0===s||s.forEach((e=>{const s=new a[e.type](this,e.x,e.y);s.setColliderLayer(t),i.add(s)})),i}addPlayerCollider(e,{platform:t}){e.addCollider(t)}onWeaponHit(e,t){e.takesHit(t)}addEnemiesCollider(e,{platform:t,player:s}){e.addCollider(t).addCollider(s,((e,t)=>{t.takesDamage(e)})).addCollider(s.projectiles,this.onWeaponHit)}initFollowerCamera(e){const{height:t,width:s,offset:i}=this.config;this.physics.world.setBounds(0,0,s-i,t+200),this.cameras.main.setBounds(0,0,s-i,t).setZoom(1.5),this.cameras.main.startFollow(e)}getPlayerZones(e){const t=e.objects;return{start:t[0],end:t[1]}}createLevelFinish(e,t){const s=this.physics.add.sprite(e.x,e.y,"end").setAlpha(0).setSize(5,400).setOrigin(0,1),i=this.physics.add.overlap(t,s,(()=>{i.active=!1,this.scene.start("WinningScene")}))}}const T=S;class C extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){this.load.tilemapTiledJSON("map","assets/maps/world_map_1.json"),this.load.image("tiles_1","assets/tiles/main_lev_build_1.png"),this.load.image("move","assets/tiles/main_lev_build_1.png"),this.load.image("fireball","assets/weapons/fireball.png"),this.load.spritesheet("player","assets/player/move_sprite.png",{frameWidth:32,frameHeight:38,spacing:32}),this.load.spritesheet("enemy_bird","assets/enemy/enemy_sheet.png",{frameWidth:32,frameHeight:64,spacing:32}),this.load.spritesheet("player_attack","assets/player/throw_attack_sheet.png",{frameWidth:32,frameHeight:38,spacing:32}),this.load.spritesheet("hit_effect","assets/weapons/hit_effect_sheet.png",{frameWidth:32,frameHeight:32})}create(){this.scene.start("MainScene")}}const _=C;class k extends Phaser.Scene{constructor(e){super({key:"GameOverScene"}),this.config=e}create(){this.cameras.main.setBackgroundColor("#000000");const e=this.add.text(this.config.width/2-30,this.config.height/2-30,"Game Over!",{fontFamily:'Georgia, "Goudy Bookletter 1911", Times, serif'});e.setSize(2,2),e.setOrigin(0)}}const P=k;class F extends Phaser.Scene{constructor(e){super({key:"WinningScene"}),this.config=e}create(){this.cameras.main.setBackgroundColor("#000000");const e=this.add.text(this.config.width/2-30,this.config.height/2-30,"You Won!",{fontFamily:'Georgia, "Goudy Bookletter 1911", Times, serif'});e.setSize(2,2),e.setOrigin(0)}}const O=F,j=document.body.offsetWidth,D={offset:1600<=j?j-1600:0,width:j,height:720,leftTopCorner:{x:(j-j/1.5)/2,y:120}},H={type:a().AUTO,backgroundColor:"#ffffff",scale:{parent:"phaser-game",mode:a().Scale.FIT,autoCenter:a().Scale.CENTER_BOTH,width:j,height:720},scene:[new _,new T(D),new P(D),new O(D)],physics:{default:"arcade",arcade:{}}};window.addEventListener("load",(()=>{new(a().Game)(H)}))}},s={};function i(e){var a=s[e];if(void 0!==a)return a.exports;var r=s[e]={exports:{}};return t[e].call(r.exports,r,r.exports,i),r.exports}i.m=t,e=[],i.O=(t,s,a,r)=>{if(!s){var h=1/0;for(l=0;l<e.length;l++){for(var[s,a,r]=e[l],n=!0,o=0;o<s.length;o++)(!1&r||h>=r)&&Object.keys(i.O).every((e=>i.O[e](s[o])))?s.splice(o--,1):(n=!1,r<h&&(h=r));n&&(e.splice(l--,1),t=a())}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[s,a,r]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var a,r,[h,n,o]=s,l=0;for(a in n)i.o(n,a)&&(i.m[a]=n[a]);if(o)var c=o(i);for(t&&t(s);l<h.length;l++)r=h[l],i.o(e,r)&&e[r]&&e[r][0](),e[h[l]]=0;return i.O(c)},s=self.webpackChunkweb_project=self.webpackChunkweb_project||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var a=i.O(void 0,[216],(()=>i(125)));a=i.O(a)})();